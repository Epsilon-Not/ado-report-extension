import*as tslib_1 from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./Header.css";import*as React from"react";import{CustomHeader}from"./CustomHeader";import{HeaderBackButton}from"./HeaderBackButton";import{HeaderDescription}from"./HeaderDescription";import{HeaderIcon}from"./HeaderIcon";import{HeaderTitle}from"./HeaderTitle";import{HeaderTitleArea}from"./HeaderTitleArea";import{HeaderTitleRow}from"./HeaderTitleRow";import{ObservableValue}from"../../Core/Observable";import{Breakpoint}from"../../Breakpoint";import{HeaderCommandBar}from"../../HeaderCommandBar";import{Observer}from"../../Observer";import{TabProviderContext}from"../../Tabs";import{css}from"../../Util";var Header=function(e){function t(t){var r=e.call(this,t)||this;return r.breakpointIndex=0,r.onBreakPoint=function(e,t){r.breakpointIndex=e,r.commandBarClassName.value=css(r.props.commandBarClassName,"flex-self-start")},r.commandBarClassName=new ObservableValue(css(t.commandBarClassName,"flex-self-start",!!t.headerBreakpoints&&"invisible")),r}return tslib_1.__extends(t,e),t.prototype.render=function(){var e=this;return React.createElement(TabProviderContext.Consumer,null,function(t){var r=e.props,a=r.backButtonProps,o=r.className,n=r.description,s=r.descriptionClassName,i=r.descriptionId,m=r.headerBreakpoints,l=r.title,c=r.titleAriaLevel,d=r.titleClassName,p=r.titleIconProps,u=r.titleId,f=r.titleSize,b=e.props.commandBarItems||t.commandBarItems,B=void 0;return b&&(B=React.createElement(Observer,{items:b,className:e.commandBarClassName},function(t){return React.createElement(HeaderCommandBar,{className:t.className,items:e.getUpdatedCommandBarItems(t.items)})})),React.createElement(React.Fragment,null,m&&React.createElement(Breakpoint,{breakpoints:m.map(function(e){return e.breakpoint}),onBreakpoint:e.onBreakPoint}),React.createElement(CustomHeader,{className:css(o,b&&b.length>0&&"bolt-header-with-commandbar",a&&"bolt-header-with-back-button"),separator:e.props.separator},a&&React.createElement(HeaderBackButton,{buttonProps:a}),React.createElement("div",{className:"bolt-header-content-area flex-row flex-grow flex-self-stretch"},p&&React.createElement(HeaderIcon,{iconProps:p,titleSize:f}),React.createElement(HeaderTitleArea,null,React.createElement(HeaderTitleRow,null,l&&React.createElement(HeaderTitle,{ariaLevel:c,className:d,id:u,titleSize:f},l)),n&&React.createElement(HeaderDescription,{className:s,id:i},n),e.props.children),B)))})},t.prototype.getUpdatedCommandBarItems=function(e){var t=this.props.headerBreakpoints,r=t?t[Math.max(0,this.breakpointIndex)]:null;if(r){var a=r.commandBarItems,o=void 0===a?[]:a;if(o.length>0){var n={};o.forEach(function(e){return n[e.id]=e});for(var s=[],i=0,m=e;i<m.length;i++){var l=m[i],c=n[l.id];c?s.push(tslib_1.__assign({},l,c)):s.push(tslib_1.__assign({},l))}return s}}return e},t}(React.Component);export{Header};