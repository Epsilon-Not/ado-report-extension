import*as tslib_1 from"tslib";import"../../CommonImports";import"../../Core/core.css";import*as React from"react";import{Button}from"../../Button";import{FilterBarItem}from"../../FilterBarItem";import*as Resources from"../../Resources.Input";import{TextField}from"../../TextField";import{css}from"../../Util";var DEFAULT_MAX_TEXT_LENGTH=200,DEFAULT_THROTTLE_WAIT=200,TextFilterBarItem=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.textField=React.createRef(),e.onClickClearButton=function(t){e.setFilterValue({value:""}),e.textField.current&&e.textField.current.focus()},e.onTextChanged=function(t,r){e.setFilterValue({value:r})},e.onKeyDown=function(t){if(e.props.filter){switch(t.which){case 13:e.props.filter.setFilterItemState(e.props.filterItemKey,{value:e.state.value}),e.props.filter.applyChanges();break;case 27:e.setFilterValue({value:""}),e.setState({value:""}),e.props.filter.applyChanges();break;default:return}t.preventDefault(),t.stopPropagation()}},e}return tslib_1.__extends(e,t),e.prototype.focus=function(){if(this.textField.current)return this.textField.current.focus()},e.prototype.render=function(){var t=this,e=this.state.value,r=this.props,o=r.className,i=r.clearable,a=r.placeholder,l=r.maxTextLength,s=r.inputClassName,n=r.style,u=r.width,c=void 0;return i&&e&&(c={render:function(e){return React.createElement(Button,{ariaLabel:Resources.ClearFilter,className:css(e,"bolt-text-filterbaritem-clear"),iconProps:{iconName:"Cancel"},onClick:t.onClickClearButton})}}),React.createElement(TextField,tslib_1.__assign({ariaLabel:a,className:css(o,"bolt-text-filterbaritem flex-grow"),containerClassName:"flex-grow",inputClassName:css(s,"bolt-text-filterbaritem-input"),focusTreatment:2,maxLength:l||DEFAULT_MAX_TEXT_LENGTH,onChange:this.onTextChanged,onKeyDown:this.onKeyDown,placeholder:a,ref:this.textField,style:n,suffixIconProps:c,value:e||"",width:u},this.getExtraTextFieldProps()))},e.prototype.getExtraTextFieldProps=function(){return null},e.prototype.getThrottleWait=function(){var t=this.props.throttleWait;return void 0===t?DEFAULT_THROTTLE_WAIT:t},e.defaultProps={isTextItem:!0},e}(FilterBarItem);export{TextFilterBarItem};