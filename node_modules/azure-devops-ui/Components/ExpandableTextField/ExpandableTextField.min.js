import*as tslib_1 from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./ExpandableTextField.css";import*as React from"react";import{Expandable}from"../../Expandable";import{TextField}from"../../TextField";import{css}from"../../Util";var textFieldId=1,ExpandableTextField=function(e){function o(o){var n=e.call(this,o)||this;return n.textFieldElement=React.createRef(),n.expandable=React.createRef(),n.collapse=function(){n.expandable.current&&n.expandable.current.collapse()},n.expand=function(){n.expandable.current&&n.expandable.current.expand()},n.onBlur=function(){n.props.blurDismiss&&n.collapse(),n.props.onBlur&&n.props.onBlur()},n.renderCallout=function(){return n.props.renderCallout(n,n.dropdownId,n.props.anchorElement?n.props.anchorElement:n.props.anchorPoint?void 0:n.containerElement.current?n.containerElement.current:void 0,n.props.anchorOffset||{horizontal:0,vertical:0},n.props.anchorOrigin||{horizontal:"end",vertical:"end"},n.props.anchorPoint,n.props.dropdownOrigin||{horizontal:"end",vertical:"start"})},n.dropdownId=o.dropdownId||"dropdown-"+textFieldId++,n.containerElement=o.containerRef||React.createRef(),n}return tslib_1.__extends(o,e),o.prototype.render=function(){var e=this;return React.createElement(Expandable,{disabled:this.props.disabled,expandKey:this.props.expandKey,onCollapse:this.props.onCollapse,onExpand:this.props.onExpand,renderCallout:this.renderCallout,ref:this.expandable},function(o){return React.createElement("div",{className:css(e.props.className,"bolt-expandable-textfield"),onMouseDown:o.onMouseDown,onKeyDown:o.onKeyDown,ref:e.containerElement,role:e.props.editable?"combobox":void 0,"aria-expanded":e.props.editable?o.expanded:void 0},React.createElement(TextField,tslib_1.__assign({ariaHasPopup:"dialog"},e.props,{role:e.props.editable?"textbox":void 0,ariaExpanded:e.props.editable?void 0:o.expanded,ariaControls:o.expanded?e.dropdownId:void 0,className:"",onBlur:e.onBlur,onClick:o.onClick,ref:e.textFieldElement,suffixIconProps:e.props.hideDropdownIcon?void 0:{key:"dropdown-icon",className:css("bolt-expandable-textfield-icon icon-right",e.props.disabled&&"disabled"),iconName:"ChevronDownMed",onClick:o.onClick,size:"small"}})))})},o.prototype.focus=function(){this.textFieldElement.current&&this.textFieldElement.current.focus()},o.prototype.select=function(){this.textFieldElement.current&&this.textFieldElement.current.select()},o.defaultProps={expandKey:[40,13]},o}(React.Component);export{ExpandableTextField};