import*as tslib_1 from"tslib";import"../../CommonImports";import"../../Core/core.css";import*as React from"react";import{MasterDetailsContext}from"../../MasterDetailsContext";import{Observer}from"../../Observer";import{Surface}from"../../Surface";import{SingleLayerMasterPanel,SingleLayerMasterPanelHeader}from"../SingleLayerMasterPanel/SingleLayerMasterPanel";export var MasterPanel=function(e){var r=e.className,t=e.showOnSmallScreens,a=(React.useRef(null),React.useContext(MasterDetailsContext));return React.createElement(Surface,{background:1},React.createElement(Observer,{masterDetailsLayer:{observableValue:a.getCurrentLayer()}},function(e){return React.createElement(MasterPanelInternal,{className:r,layer:e.masterDetailsLayer,showOnSmallScreens:t})}))};var MasterPanelInternal=function(e){var r=e.className,t=e.layer,a=e.showOnSmallScreens,n=React.createRef(),l=(React.useState(MasterDetailsContext),React.useRef(!0));React.useEffect(function(){l.current?l.current=!1:n.current&&n.current.focus()},[e.layer]);var s=t.masterPanelContent,c=t.parentItem,o=t.selectedMasterItem,i=s.renderHeader?function(){return s.renderHeader(c)}:void 0,u=s.renderSearch?function(){return s.renderSearch(c)}:void 0,m=s.renderContent?function(){return s.renderContent(c,o)}:void 0;return React.createElement(React.Fragment,null,React.createElement("div",{ref:n,"aria-label":t.ariaLabel,tabIndex:-1}),React.createElement(SingleLayerMasterPanel,{className:r,key:"master-panel-"+t.key,renderContent:m,renderHeader:i,renderSearch:u,showOnSmallScreens:a}))};export var MasterPanelHeader=function(e){var r=React.useContext(MasterDetailsContext),t=r.getCurrentLayer().value.masterPanelContent;return React.createElement(SingleLayerMasterPanelHeader,tslib_1.__assign({},e,{onBackButtonClick:!1!==t.hideBackButton?function(){!1!==(t.onBackButtonClick&&t.onBackButtonClick())&&r.pop()}:void 0}))};