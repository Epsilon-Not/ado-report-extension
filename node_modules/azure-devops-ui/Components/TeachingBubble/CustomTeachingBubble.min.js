import*as tslib_1 from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./TeachingBubble.css";import*as React from"react";import{Callout}from"../../Callout";import{css}from"../../Util";var CustomTeachingBubble=function(e){function t(t){var r=e.call(this,t)||this;return r.dismiss=function(){r.setState({fadingOut:!0})},r.onAnimationEnd=function(){r.state.fadingOut?r.props.onDismiss&&r.props.onDismiss():r.state.newPosition&&r.setState({anchorElement:r.props.anchorElement,anchorOrigin:r.props.anchorOrigin,children:r.props.children,cornerPlacement:r.props.cornerPlacement,newPosition:!1},r.props.onLocationChange)},r.getCalloutOrigin=function(e,t){return"center"===e.horizontal?t=1:"center"===e.vertical&&(t=0),0===t?"start"===e.horizontal?{horizontal:"end",vertical:e.vertical}:"end"===e.horizontal?{horizontal:"start",vertical:e.vertical}:{horizontal:"center",vertical:e.vertical}:"start"===e.vertical?{horizontal:e.horizontal,vertical:"end"}:"end"===e.vertical?{horizontal:e.horizontal,vertical:"start"}:{horizontal:e.horizontal,vertical:"center"}},r.getBeakClassName=function(e,t){var r,n;return r="start"===t.horizontal?"end"===e.horizontal?"left-primary":"left-secondary":"end"===t.horizontal?"start"===e.horizontal?"right-primary":"right-secondary":"center-h",n="start"===t.vertical?"end"===e.vertical?"top-primary":"top-secondary":"end"===t.vertical?"start"===e.vertical?"bottom-primary":"bottom-secondary":"center-v",css(r,n)},r.state={anchorElement:t.anchorElement,anchorOrigin:t.anchorOrigin,children:t.children,cornerPlacement:r.props.cornerPlacement},r}return tslib_1.__extends(t,e),t.getDerivedStateFromProps=function(e,t){return t.anchorElement!==e.anchorElement||t.anchorOrigin.horizontal!==e.anchorOrigin.horizontal||t.anchorOrigin.vertical!==e.anchorOrigin.vertical?tslib_1.__assign({},t,{newPosition:!0}):{children:e.children,cornerPlacement:e.cornerPlacement}},t.prototype.render=function(){var e=this.state,t=e.anchorElement,r=e.anchorOrigin,n=e.children,a=e.cornerPlacement,i=void 0===a?1:a,o=e.fadingOut,l=e.newPosition,c=this.getCalloutOrigin(r,i);return React.createElement(Callout,{anchorElement:t,anchorOrigin:r,ariaDescribedBy:this.props.ariaDescribedBy,ariaLabelledBy:this.props.ariaLabeledBy,blurDismiss:this.props.textOnly,calloutOrigin:c,contentClassName:css("bolt-bubble-callout relative",(o||l)&&"fade-out",this.getBeakClassName(r,c)),contentShadow:!0,escDismiss:!0,fixedLayout:!0,focuszoneProps:{circularNavigation:!0,defaultActiveElement:this.props.defaultActiveElement||".bolt-bubble-focusable-element",focusOnMount:!0,handleTabKey:!0,includeDefaults:!0,postprocessKeyStroke:function(e){return 9===e.which&&e.preventDefault(),2}},onAnimationEnd:this.onAnimationEnd,onDismiss:this.dismiss,updateLayout:!0,viewportChangeDismiss:!1},React.createElement("div",{"aria-live":"polite","aria-relevant":"text",className:"bolt-bubble-container"},React.createElement("div",{className:"bolt-bubble-beak depth-8"}),React.createElement("div",{className:"bolt-bubble-content relative scroll-hidden"},React.createElement("div",{className:"bolt-bubble-focusable-element no-outline",tabIndex:-1}),n)))},t}(React.Component);export{CustomTeachingBubble};