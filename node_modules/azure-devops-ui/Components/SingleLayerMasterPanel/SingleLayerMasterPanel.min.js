import"../../CommonImports";import"../../Core/core.css";import"./SingleLayerMasterPanel.css";import*as React from"react";import{useObservable}from"../../Core/Observable";import{TimerManagement}from"../../Core/TimerManagement";import{Header}from"../../Header";import{Intersection}from"../../Intersection";import{Observer}from"../../Observer";import{css}from"../../Util";export var SingleLayerMasterPanel=function(e){var r=e.className,t=e.renderContent,n=e.renderHeader,a=e.renderSearch,c=e.showOnSmallScreens,l=void 0!==c&&c,s=useObservable(!1),o=s[0],i=s[1],u=React.useRef(null),m=React.useRef(null),d=React.useRef(null),f=React.useRef(null),R=React.useRef(0),p=React.useRef(0),v=React.useRef(new TimerManagement),b=React.useRef(!1),h=React.useRef(),g=function(){if(u.current&&f.current){var e=u.current.scrollTop;o.value&&!b.current&&0===e?i(!1):o.value||R.current+f.current.clientHeight>u.current.clientHeight&&p.current+f.current.clientHeight<u.current.clientHeight||(b.current=!0,h.current&&v.current.clearTimeout(h.current),h.current=v.current.setTimeout(function(){b.current=!1,g()},100),i(!0))}};return React.useEffect(function(){return m.current&&(R.current=m.current.clientHeight),d.current&&(p.current=d.current.clientHeight),document.addEventListener("resize",g),function(){document.removeEventListener("resize",g),v.current.dispose()}},[]),React.createElement(Intersection,null,React.createElement("div",{className:css(r,"bolt-master-panel flex-column flex-noshrink scroll-auto",l&&"show-on-small-screens"),onScroll:g,ref:u},n&&React.createElement(React.Fragment,null,React.createElement(Observer,{isScrolled:o},function(e){return React.createElement("div",{className:css("bolt-master-panel-header",a&&"has-search",e.isScrolled&&"content-scrolled"),ref:m},n())}),React.createElement("div",{className:css("bolt-master-panel-header hide",a&&"has-search","content-scrolled"),ref:d},n())),React.createElement("div",{className:"bolt-master-panel-content flex-column",ref:f},a&&React.createElement("div",{className:"bolt-master-panel-search"},a()),t&&t())))};export var SingleLayerMasterPanelHeader=function(e){var r=e.title,t=e.subTitle,n=e.onBackButtonClick;return React.createElement(Header,{backButtonProps:n?{onClick:n,subtle:!0}:void 0,className:"bolt-master-panel-standard-header",description:t,descriptionClassName:"bolt-master-panel-header-subtitle bolt-master-panel-header-secondary",title:r,titleClassName:"bolt-master-panel-header-title",titleSize:1})};