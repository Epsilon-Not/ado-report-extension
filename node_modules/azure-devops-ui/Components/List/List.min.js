function getAttributeAsNumber(e,t){var r=e.getAttribute(t);return r?parseInt(r,10):-1}import*as tslib_1 from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./List.css";import"./ListDropIndicator.css";import*as React from"react";import{ObservableArray,ObservableLike}from"../../Core/Observable";import{FocusWithin}from"../../FocusWithin";import{FocusZone,FocusZoneContext}from"../../FocusZone";import{Icon}from"../../Icon";import{Intersection,IntersectionContext}from"../../Intersection";import{Link}from"../../Link";import{Observer}from"../../Observer";import{Tooltip}from"../../TooltipEx";import{css,eventTargetContainsNode,getSafeId}from"../../Util";import{EventDispatch}from"../../Utilities/Dispatch";import{getTabIndex}from"../../Utilities/Focus";var List=function(e){function t(t){var r=e.call(this,t)||this;r.bodyElement=React.createRef(),r.listElement=React.createRef(),r.spacerElements={},r.scrollToIndex=-1,r.scrollToOptions=void 0,r.selectOnFocus=!0,r.focusIndex=-1,r.pivotIndex=-1,r.onBlur=function(){r.focusIndex=-1},r.onClick=function(e){if(r.onDispatch(e),!(e.defaultPrevented||e.altKey&&r.props.selectableText)&&r.listElement.current){var t=cellFromEvent(e),i=t.cellElement,o=t.rowIndex;if(!i||!eventTargetContainsNode(e,["A"],i)){var n=ObservableLike.getValue(r.state.rows[o]);if(o>=0&&n){var s={data:n,index:o};r.props.selectRowOnClick&&r.processSelectionEvent(e,s),r.props.singleClickActivation&&r.rowActivated(e,s)}}}},r.onDispatch=function(e){r.state.eventDispatch.dispatchEvent(e)},r.onDoubleClick=function(e){if(r.onDispatch(e),!e.defaultPrevented&&!r.props.singleClickActivation){var t=cellFromEvent(e).rowIndex,i=ObservableLike.getValue(r.state.rows[t]);t>=0&&i&&r.rowActivated(e,{data:i,index:t})}},r.onFocusBody=function(e){if(r.selectOnFocus){var t=r.props.selection;if(!t||t.selectOnFocus){var i=r.focusIndex;if(i>=0){var o=ObservableLike.getValue(r.state.rows[i]);o&&r.processSelectionEvent(e,{data:o,index:i})}}r.selectOnFocus=!1}},r.onFocusItem=function(e,t){var i=r.focusIndex;if(i!==e){i>=0?delete r.state.renderedRows[i]:delete r.state.renderedRows[r.getInitialTabbableRow()],delete r.state.renderedRows[e],r.focusIndex=e;var o=ObservableLike.getValue(r.state.rows[e]);o&&r.rowFocused(t,{data:o,index:e})}},r.onKeyDown=function(e){if(r.onDispatch(e),!e.defaultPrevented){var t=e.target.nodeName;if("INPUT"===t||"TEXTAREA"===t)return;var i=r.focusIndex,o=ObservableLike.getValue(r.state.rows[i]);if(o)if(13===e.which)i>=0&&!eventTargetContainsNode(e,["A"])&&r.rowActivated(e,{data:o,index:i});else if(32===e.which)r.processSelectionEvent(e,{data:o,index:i}),e.preventDefault();else if(38===e.which||40===e.which){var n=r.props.selection;n&&(!n.selectOnFocus||!e.shiftKey&&e.ctrlKey)||(e.persist(),window.setTimeout(function(){if(r.focusIndex!=i){var t=ObservableLike.getValue(r.state.rows[r.focusIndex]);t&&r.processSelectionEvent(e,{data:t,index:r.focusIndex})}},0))}else if(34===e.which){s=r.getStats();r.focusRow(Math.min(i+(s.lastRendered-s.firstRendered),r.state.rowCount-1),1),e.preventDefault()}else if(33===e.which){var s=r.getStats();r.focusRow(Math.max(i-(s.lastRendered-s.firstRendered),0),-1),e.preventDefault()}else 36===e.which?(r.focusRow(0,1),e.preventDefault()):35===e.which&&(r.focusRow(r.state.rowCount-1,-1),e.preventDefault())}},r.onIntersect=function(e){if(r.props.virtualize){var t=r.context.root.scrollTop,i=r.state.rowCount,o=r.state,n=o.firstRendered,s=o.firstMaterialized,a=o.lastRendered,l=o.lastMaterialized,c=r.state,d=c.rowHeight,u=c.rowProportion;if((t===r.state.scrollTop||!e.length)&&r.listElement.current&&r.bodyElement.current){var p=r.bodyElement.current.children;if(0===d){if(p.length>0){for(var h=0,m=0,f=0;f<p.length;f++){var v=r.bodyElement.current.children[f].getBoundingClientRect().height;v>0&&(h+=v,m++)}m>0&&(d=h/m)}if(0===d)return;if(-1!==r.scrollToIndex)return void r.setState({firstMaterialized:Math.max(0,r.scrollToIndex-r.state.pageSize),lastMaterialized:r.scrollToIndex+Math.min(r.props.initialPageCount*r.state.pageSize,i-1),rowHeight:d})}for(var g,b,x=r.context.root.getBoundingClientRect(),w=s,y=l,R=y,I=w,f=0;f<p.length;f++){var M=p[f],E=getAttributeAsNumber(M,"data-row-index"),z=M.getBoundingClientRect();E>=s&&E<=l&&(z.bottom<x.top-r.state.pageSize*d?w++:z.top>x.bottom+r.state.pageSize*d&&y--,E===s&&(g=M),E===l&&(b=M)),E>-1&&z.top<x.bottom&&z.bottom>x.top&&(I=Math.max(I,E),R=Math.min(R,E))}if(u<1)if(w>y||R===w||I===y)if(I>=i-1)w=Math.ceil(y-(x.height/d+r.state.pageSize));else{C=t-(r.listElement.current.offsetTop-r.context.root.offsetTop);w=Math.max(0,Math.min(i-1,Math.floor(C/(u*d)))-r.state.pageSize),y=Math.min(i-1,w+Math.ceil(x.height/d+r.state.pageSize)),I=-1,R=-1}else w=Math.min(w,R-r.state.pageSize),y=Math.max(y,I+r.state.pageSize);else if(w>y){var C=t-(r.listElement.current.offsetTop-r.context.root.offsetTop);w=Math.max(0,Math.min(i-1,Math.floor(C/d))-r.state.pageSize),y=Math.min(i-1,w+Math.ceil(x.height/d+r.state.pageSize)),I=-1,R=-1}else{if(w===s&&g){(S=(z=g.getBoundingClientRect()).top-x.top)>0&&(w-=Math.ceil(S/d))}if(y===l&&b){var z=b.getBoundingClientRect(),S=x.bottom-z.bottom;S>0&&(y+=Math.ceil(S/d))}}w=Math.max(w,0),y=Math.min(y,i-1),w===s&&R===n&&y===l&&I===a&&d===r.state.rowHeight&&t===r.state.scrollTop||r.setState({firstMaterialized:w,firstRendered:R,lastMaterialized:y,lastRendered:I,rowHeight:d,scrollTop:t})}}},r.onMouseDownBody=function(e){r.selectOnFocus=!1},r.getInitialTabbableRow=function(){var e=r.props,t=e.defaultTabbableRow,i=e.itemProvider,o=e.selection;if(t)return t;if(o)for(var n=0;n<i.length;n++)if(o.selectable(n))return n;return 0};var i=t.itemProvider.length,o=t.pageSize;if(r.state={columnCount:1,eventDispatch:t.eventDispatch||new EventDispatch,firstMaterialized:0,firstRendered:0,itemProvider:t.itemProvider,lastMaterialized:r.props.virtualize?Math.min(t.initialPageCount*o,i-1):i-1,lastRendered:r.props.virtualize?Math.min(t.initialPageCount*o,i-1):i-1,overlays:new ObservableArray,pageSize:o,renderedRows:{},rowCount:i,rowHeight:t.rowHeight||0,rowProportion:t.rowHeight&&t.maxHeight?Math.min(1,t.maxHeight/(t.rowHeight*i)):1,rows:{},scrollTop:0},t.behaviors)for(var n=0,s=t.behaviors;n<s.length;n++){var a=s[n];a.initialize&&a.initialize(t,r,r.state.eventDispatch)}return r}return tslib_1.__extends(t,e),t.getDerivedStateFromProps=function(e,t){var r=e.itemProvider.length,i=t.firstMaterialized,o=t.lastMaterialized;r!==t.rowCount&&(i=Math.max(0,Math.min(t.firstMaterialized,r)),o=e.virtualize?Math.max(i,Math.min(t.lastMaterialized+(t.lastMaterialized===t.rowCount-1?e.pageSize:0),r-1)):r-1);var n={firstMaterialized:i,itemProvider:e.itemProvider,lastMaterialized:o,pageSize:e.pageSize,rowCount:r,rowProportion:Math.min(1,(e.maxHeight||1e5)/(t.rowHeight*(r-(o-i))))};return e.itemProvider===t.itemProvider&&e.columnCount===t.columnCount||(n.columnCount=e.columnCount,n.renderedRows={},n.rows={}),n},t.prototype.render=function(){var e=this,t=this.props,r=t.ariaRowOffset,i=t.className,o=t.focuszoneProps,n=t.id,s=t.maxWidth,a=t.minWidth,l=t.width,c=this.state,d=c.firstMaterialized,u=c.lastMaterialized,p=c.rowCount,h=c.rowProportion,m=this.focusIndex,f=this.props.role?this.props.role:this.props.selection?"listbox":"list",v="table"===f||"grid"===f||"treegrid"===f,g=[],b=0,x=d,w=Math.max(0,p-u-1),y=0,R=Number.MAX_SAFE_INTEGER,I=0;if(-1!==m&&(R=Math.max(0,m-3),I=Math.min(p,m+3),R<d?(b=R,x=d-(I=Math.min(I,d-1))-1):I>u&&(w=(R=Math.max(R,u+1))-u-1,y=Math.max(0,p-I-1))),h<1&&(x+=Math.min(this.state.pageSize,d)),g.push(this.renderSpacer("st1",b)),R<d)for(M=R;M<=I;M++)g.push(this.renderRow(M));g.push(this.renderSpacer("st2",x));for(M=d;M<=u;M++)g.push(this.renderRow(M));if(g.push(this.renderSpacer("sb2",w)),I>u)for(var M=R;M<=I;M++)g.push(this.renderRow(M));return g.push(this.renderSpacer("sb1",y)),React.createElement(Observer,{itemProvider:{filter:function(t,r){e.props.selection&&e.props.selection.onItemsChanged(t,r);var i={renderedRows:{},rows:{}};if(t.removedItems&&e.focusIndex>=t.index&&t.index+t.removedItems.length>=e.focusIndex&&(e.focusIndex=-1),-1!==e.state.rowCount){var o=(t.addedItems?t.addedItems.length:0)-(t.removedItems?t.removedItems.length:0);o&&(i.rowCount=e.state.rowCount+o,i.firstMaterialized=Math.max(0,Math.min(e.state.firstMaterialized,i.rowCount-1)),i.lastMaterialized=e.props.virtualize?Math.max(i.firstMaterialized,Math.min(e.state.lastMaterialized+(t.index>=e.state.firstMaterialized&&t.index<=e.state.lastMaterialized+1?Math.min(e.state.pageSize,o):0),i.rowCount-1)):i.rowCount-1)}return e.setState(i),!1},observableValue:this.props.itemProvider}},React.createElement(FocusWithin,{onBlur:this.onBlur},function(t){var c=React.createElement("table",{"aria-colcount":v?e.props.ariaColumnCount?e.props.ariaColumnCount:e.props.columnCount:void 0,"aria-label":e.props.ariaLabel,"aria-rowcount":v?e.state.itemProvider.length+r:void 0,className:css(i,"bolt-list body-m relative scroll-hidden"),id:getSafeId(n),onBlur:t.onBlur,onClick:e.onClick,onDoubleClick:e.onDoubleClick,onDragEnd:e.onDispatch,onDragEnter:e.onDispatch,onDragExit:e.onDispatch,onDragOver:e.onDispatch,onDragStart:e.onDispatch,onDrop:e.onDispatch,onFocus:t.onFocus,onKeyDown:e.onKeyDown,onKeyUp:e.onDispatch,onMouseDown:e.onDispatch,onTouchStart:e.onDispatch,ref:e.listElement,role:f,style:{maxWidth:s,minWidth:a,width:l}},e.props.renderHeader&&e.props.renderHeader(),React.createElement("tbody",{className:"relative",onFocus:e.onFocusBody,onMouseDown:e.onMouseDownBody,ref:e.bodyElement},e.renderOverlay(e.listElement),g));return o&&(c=React.createElement(FocusZone,tslib_1.__assign({},o,{skipHiddenCheck:!0}),c)),c}))},t.prototype.componentDidMount=function(){this.context.register(this.onIntersect)},t.prototype.componentDidUpdate=function(){var e=this.scrollToIndex,t=this.onScrollComplete;if(-1!==e&&this.state.rowHeight){var r=this.bodyElement.current,i=this.state,o=i.firstMaterialized,n=i.lastMaterialized;if(e>=o&&e<=n&&r)for(var s=0;s<r.children.length;s++){var a=r.children[s];if(cellFromElement(a).rowIndex===e){a.scrollIntoView(this.scrollToOptions);break}}this.onScrollComplete=void 0,this.scrollToIndex=-1,this.scrollToOptions=void 0,t&&t(e)}},t.prototype.componentWillUnmount=function(){this.context.unregister(this.onIntersect)},t.prototype.addOverlay=function(e,t,r,i){void 0===i&&(i=0);var o=this.state.overlays,n=o.value.findIndex(function(t){return t.id===e}),s={render:r,id:e,rowIndex:t,zIndex:i+1};n>=0?o.change(n,s):o.push(s)},t.prototype.removeOverlay=function(e){var t=this.state.overlays,r=t.value.findIndex(function(t){return t.id===e});r>=0&&t.splice(r,1)},t.prototype.getFocusIndex=function(){return this.focusIndex},t.prototype.getStats=function(){return{firstMaterialized:this.state.firstMaterialized,firstRendered:this.state.firstRendered,lastMaterialized:this.state.lastMaterialized,lastRendered:this.state.lastRendered}},t.prototype.scrollIntoView=function(e,t,r){var i=this.state,o=i.firstMaterialized,n=i.lastMaterialized,s=i.pageSize,a=i.rowCount,l=i.rowHeight,c=i.rowProportion;if(e>=0&&e<this.state.rowCount){var d=this.bodyElement.current;if(e>=o&&e<=n&&d){for(var u=0;u<d.children.length;u++){var p=d.children[u];if(cellFromElement(p).rowIndex===e){p.scrollIntoView(t);break}}r&&r(e)}else{this.onScrollComplete&&this.onScrollComplete(-1),this.onScrollComplete=r,this.scrollToIndex=e,this.scrollToOptions=t;var h=c<1?s:0;l&&this.setState({firstMaterialized:Math.max(0,e-h),lastMaterialized:Math.min(a-1,e+h)})}}},t.prototype.focusRow=function(e,t){var r=this;this.scrollIntoView(e,{block:"center"},function(i){if(i===e&&r.bodyElement.current){var o=r.bodyElement.current.querySelector("[data-row-index='"+i+"']");if(o)if(o.getAttribute("tabindex"))o.focus();else{var n=Math.min(r.state.rowCount-1,Math.max(0,i+t));n!==i?r.focusRow(n,t):n!==r.focusIndex&&r.focusRow(n,-t)}}})},t.prototype.processSelectionEvent=function(e,t){var r=this.props.selection;if(!r||r.selectable(t.index)){if(r){var i=t.index;if(this.pivotIndex>=0&&e.shiftKey&&r.multiSelect)r.select(Math.min(this.pivotIndex,i),Math.abs(this.pivotIndex-i)+1,e.ctrlKey||e.metaKey);else{var o=32===e.which;(e.ctrlKey||e.metaKey||r.alwaysMerge||o)&&r.multiSelect?r.toggle(i,!0):r.select(i,1,!1)}e.shiftKey||(this.pivotIndex=i)}this.rowSelected(e,t)}},t.prototype.renderLoadingRow=function(e,t){return React.createElement(ListItem,{className:"bolt-list-row-loading",details:t,index:e},React.createElement("div",{className:"shimmer shimmer-line",style:{width:80*Math.random()+20+"%"}},"Â "))},t.prototype.renderOverlay=function(e){var t=this,r=this.state,i=r.firstMaterialized,o=r.lastMaterialized,n=r.overlays;return React.createElement(Observer,{overlays:n},function(r){var n=t.bodyElement.current;return r.overlays.length>0&&n?React.createElement("div",{className:"bolt-list-overlay-container absolute"},r.overlays.map(function(t){if(t.rowIndex<i||t.rowIndex>o)return null;var r=e.current&&e.current.querySelector("[data-row-index='"+t.rowIndex+"']");return r?React.createElement("div",{className:"bolt-list-overlay flex-row absolute",id:getSafeId(t.id),key:t.id,style:{height:r.offsetHeight,top:r.getBoundingClientRect().top-n.getBoundingClientRect().top,zIndex:10*t.zIndex}},t.render({rowElement:r})):null})):null})},t.prototype.renderRow=function(e){var t=this,r=this.props.itemProvider,i=this.state,o=i.renderedRows,n=i.rows,s=o[e];if(!s){var a=n[e];if(a||(a=r.getItem?r.getItem(e):r.value[e]),!a)return null;n[e]=a;var l=this.props.selection,c=void 0;l&&(c={observableValue:l,filter:function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(e>=o.beginIndex&&e<=o.endIndex)return!0}return!1}}),s=React.createElement(Observer,{item:a,key:e,selection:c},function(r){var i=t.props,o=i.selectableText,n=i.renderRow,s=i.renderLoadingRow,l=t.focusIndex,c=l>=0?l:t.getInitialTabbableRow(),d=ObservableLike.getValue(a),u={selectableText:o,ariaBusy:!r.item,ariaRowOffset:t.props.ariaRowOffset+1,data:d,eventDispatch:t.state.eventDispatch,excludeTabStop:c!==e,listProps:t.props,onFocusItem:t.onFocusItem,singleClickActivation:t.props.onActivate&&t.props.singleClickActivation};return r.item?n(e,r.item,u):s?s(e,u):t.renderLoadingRow(e,u)}),this.state.renderedRows[e]=s}return s},t.prototype.renderSpacer=function(e,t){var r=this;return React.createElement("tr",{"aria-hidden":"true",className:"bolt-list-row-spacer invisible",key:e,ref:function(t){var i=r.spacerElements[e];t?i!==t&&(i&&r.context.unobserve(t),r.context.observe(t),r.spacerElements[e]=t):i&&(r.context.unobserve(i),delete r.spacerElements[e])},role:"presentation"},React.createElement("td",{className:"bolt-list-cell-spacer invisible",colSpan:this.props.columnCount,style:{height:t*this.state.rowHeight*this.state.rowProportion+"px"}}))},t.prototype.rowActivated=function(e,t){this.state.eventDispatch.dispatchEvent(e,t,"activate"),this.props.onActivate&&this.props.onActivate(e,t)},t.prototype.rowSelected=function(e,t){this.state.eventDispatch.dispatchEvent(e,t,"select"),this.props.onSelect&&this.props.onSelect(e,t)},t.prototype.rowFocused=function(e,t){this.state.eventDispatch.dispatchEvent(e,t,"focus"),this.props.onFocus&&this.props.onFocus(e,t)},t.contextType=IntersectionContext,t.defaultProps={ariaRowOffset:0,columnCount:1,focuszoneProps:{direction:2},initialPageCount:3,maxHeight:1e5,pageSize:10,singleClickActivation:!1,selectRowOnClick:!0,virtualize:!0},t}(React.Component);export{List};var ScrollableList=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.list=React.createRef(),t.scrollableElement=React.createRef(),t}return tslib_1.__extends(t,e),t.prototype.render=function(){return React.createElement(Intersection,{rootMargin:window.innerHeight/2},React.createElement("div",{ref:this.scrollableElement,onScroll:this.props.onScroll,className:css(this.props.outerClassName,"flex-grow","scroll-auto")},React.createElement(List,tslib_1.__assign({},this.props,{ref:this.list}))))},t.prototype.addOverlay=function(e,t,r,i){if(void 0===i&&(i=0),this.list.current)return this.list.current.addOverlay(e,t,r,i)},t.prototype.getStats=function(){return this.list.current?this.list.current.getStats():{firstMaterialized:-1,firstRendered:-1,lastMaterialized:-1,lastRendered:-1}},t.prototype.removeOverlay=function(e){if(this.list.current)return this.list.current.removeOverlay(e)},t.prototype.getFocusIndex=function(){return this.list.current?this.list.current.getFocusIndex():-1},t.prototype.scrollIntoView=function(e,t){if(this.list.current)return this.list.current.scrollIntoView(e,t)},t.prototype.scrollTo=function(e){this.scrollableElement.current&&(this.scrollableElement.current.scrollTop=e)},t}(React.Component);export{ScrollableList};var SimpleList=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.list=React.createRef(),t.renderListItem=function(e,t,r){return renderListItem(e,r,renderListCell(t))},t}return tslib_1.__extends(t,e),t.prototype.render=function(){var e={selectableText:this.props.selectableText,className:this.props.className,columnCount:1,eventDispatch:this.props.eventDispatch,focuszoneProps:this.props.focuszoneProps,id:this.props.id,initialPageCount:this.props.initialPageCount,itemProvider:this.props.itemProvider,maxHeight:this.props.maxHeight,onActivate:this.props.onActivate,onFocus:this.props.onFocus,onSelect:this.props.onSelect,pageSize:this.props.pageSize,renderRow:this.renderListItem,selection:this.props.selection,width:this.props.width,virtualize:this.props.virtualize};return this.props.scrollable?React.createElement(ScrollableList,tslib_1.__assign({},e,{ref:this.list})):React.createElement(List,tslib_1.__assign({},e,{ref:this.list}))},t.prototype.addOverlay=function(e,t,r,i){if(void 0===i&&(i=0),this.list.current)return this.list.current.addOverlay(e,t,r,i)},t.prototype.removeOverlay=function(e){if(this.list.current)return this.list.current.removeOverlay(e)},t.prototype.getFocusIndex=function(){return this.list.current?this.list.current.getFocusIndex():-1},t.prototype.getStats=function(){return this.list.current?this.list.current.getStats():{firstMaterialized:-1,firstRendered:-1,lastMaterialized:-1,lastRendered:-1}},t.prototype.scrollIntoView=function(e,t){if(this.list.current)return this.list.current.scrollIntoView(e,t)},t}(React.Component);export{SimpleList};export function renderListItem(e,t,r){return React.createElement(ListItem,{details:t,index:e},r)};export function ListItem(e){var t,r=e.children,i=e.details,o=e.index,n=e.linkProps,s=i.selectableText,a=i.ariaBusy,l=i.ariaDescribedBy,c=i.ariaLabel,d=i.ariaPosInSet,u=i.ariaSetSize,p=i.excludeFocusZone,h=i.listProps,m=h.selection,f=h.singleClickActivation,v=n?"a":"tr",g=n?"div":"td";return n&&(t={disabled:n.disabled,href:n.href,id:n.id,rel:n.rel,role:n.role,target:n.target}),React.createElement(FocusWithin,{onFocus:function(t){e.details.onFocusItem(e.index,t)}},function(h){return React.createElement(FocusZoneContext.Consumer,null,function(b){return React.createElement(FocusZone,{direction:1},React.createElement(v,tslib_1.__assign({},t,{"aria-busy":a,"aria-describedby":l,"aria-label":c,"aria-posinset":void 0===d?o+1:null===d?void 0:d,"aria-selected":m&&m.selected(o),"aria-setsize":void 0===u?e.details.listProps.itemProvider.length:null===u?void 0:u,className:css(e.className,"bolt-list-row",0===o&&"first-row",n&&"bolt-link",m&&m.selected(o)&&"selected",h.hasFocus&&"focused",f&&"single-click-activation",s&&"selectable-text"),"data-focuszone":p||m&&!m.selectable(o)?void 0:b.focuszoneId,"data-row-index":o,tabIndex:getTabIndex(i),onBlur:h.onBlur,onFocus:h.onFocus,role:m?"option":"listitem"}),React.createElement(g,{className:"bolt-list-cell","data-column-index":0},React.createElement("div",{className:"bolt-list-cell-content flex-row"},r))))})})};export function renderListCell(e){var t=void 0,r=React.createElement(Tooltip,{overflowOnly:!0},React.createElement("span",{className:"text-ellipsis body-m"},"string"==typeof e||"number"==typeof e?e:e.textNode?e.textNode:e.text)),i=r,o=css("bolt-list-cell-child flex-row flex-center");return"string"!=typeof e&&"number"!=typeof e&&(t=e.textClassName,e.iconProps&&(i=React.createElement(React.Fragment,null,Icon(tslib_1.__assign({},e.iconProps,{className:css("icon-margin",e.iconProps.className)})),r)),e.href)?React.createElement(Link,{className:css(t,o,"scroll-hidden"),href:e.href,excludeTabStop:!0,subtle:!0},i):React.createElement("span",{className:css(t,o,"bolt-list-cell-text")},i)};export function cellFromElement(e){for(var t,r=-1,i=-1,o=null;e;){if(-1!==(t=getAttributeAsNumber(e,"data-column-index"))&&(r=t,o=e),-1!==(t=getAttributeAsNumber(e,"data-row-index"))){i=t;break}if(e.classList.contains("bolt-list")){e=null;break}e=e.parentElement}return{cellElement:o,cellIndex:r,rowElement:e,rowIndex:i}};export function cellFromEvent(e){return cellFromElement(e.target)};